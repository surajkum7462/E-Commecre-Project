<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org"
	th:replace="~{base :: layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<section
		style="background: #f4f4f4; } .container { max-width: 1100px; } .card { border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); background: #fff; } .card-header { background: linear-gradient(135deg, #007bff, #0056b3); color: white; font-size: 1.6rem; font-weight: bold; text-align: center; padding: 15px; } .table { margin-top: 10px; } .table th { background: #007bff; color: white; text-align: center; } .table td { text-align: center; vertical-align: middle; } .btn-primary { background: #28a745; border: none; transition: all 0.3s ease-in-out; } .btn-primary :hover { background: #218838; } .btn-danger { background: #dc3545; border: none; transition: all 0.3s ease-in-out; } .btn-danger :hover { background: #c82333; } .quantity-control i { color: #007bff; cursor: pointer; padding: 5px; transition: all 0.3s ease-in-out; } .quantity-control i :hover { color: #0056b3; } .total-price { font-size: 1.2rem; font-weight: bold; color: #28a745; } .checkout-btn { width: 100%; font-size: 1.2rem; font-weight: bold; } .toast-container { position: fixed; top: 20px; right: 20px; z-index: 1050; } .toast { background: #28a745; color: white; font-weight: bold; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">
		<div class="container mt-5 p-3">
			<div class="card">
				<div class="card-header fw-bold">ðŸ›’ Cart Page</div>

				<!-- Success Message (Toast) -->
				<th:block th:if="${session.successMsg}">
					<div class="toast-container">
						<div id="cartToast"
							class="toast show align-items-center text-white bg-success border-0 shadow-lg"
							role="alert" aria-live="assertive" aria-atomic="true">
							<div class="toast-header">
								<strong class="me-auto">Success</strong> <small
									class="text-muted">just now</small>
								<button type="button"
									class="btn-close btn-close-white me-2 m-auto"
									data-bs-dismiss="toast" aria-label="Close"></button>
							</div>
							<div class="toast-body">
								<i class="fas fa-check-circle"></i> [[${session.successMsg}]]
							</div>
						</div>
					</div>
					<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
				</th:block>

				<!-- Error Message -->
				<th:block th:if="${session.errorMsg}">
					<p class="text-danger fw-bold text-center mt-2">[[${session.errorMsg}]]</p>
					<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
				</th:block>

				<div class="card-body">
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
								<th scope="col">SI No</th>
								<th scope="col">Image</th>
								<th scope="col">Product Name</th>
								<th scope="col">Price</th>
								<th scope="col" class="text-center">Quantity</th>
								<th scope="col">Total Price</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="cart, c : ${carts}">
								<th scope="row">[[${c.count}]]</th>
								<!-- th:src="@{'/img/product_img/'+${cart.product.image}}" -->
								<td><img
									th:src="${cart.product.image}"
									class="rounded" width="50px" height="70px"></td>
								<td>[[${cart.product.title}]]</td>
								<td class="fw-bold">&#8377;[[${cart.product.discountPrice}]]</td>
								<td class="text-center quantity-control"><a
									th:href="@{'/user/cartQuantityUpdate?sy=de&cid='+${cart.id}}">
										<i class="fa-solid fa-minus"></i>
								</a> <span class="fw-bold">[[${cart.quantity}]]</span> <a
									th:href="@{'/user/cartQuantityUpdate?sy=in&cid='+${cart.id}}">
										<i class="fa-solid fa-plus"></i>
								</a></td>
								<td class="fw-bold total-price">&#8377;[[${cart.totalPrice}]]</td>
							</tr>
							<tr>
								<td colspan="4"></td>
								<td class="fw-bold text-primary">Total Price</td>
								<td class="fw-bold total-price">&#8377;[[${totalOrderPrice}]]</td>
							</tr>

						</tbody>
					</table>
					<div class="text-center">
						<a href="/user/orders" class="btn btn-primary checkout-btn">Proceed to
							Payment</a>
					</div>
				</div>
			</div>
		</div>


	</section>

</body>
</html>