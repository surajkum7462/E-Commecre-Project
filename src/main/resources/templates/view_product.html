<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Product Details</title>

</head>
<body>

	<section
		style="border-radius: 12px; overflow: hidden; transition: transform 0.3s ease-in-out;">
		<div class="container mt-5">
			<div class="card card-custom p-4">
				<div class="row align-items-center ">

					<!-- Success Message (Toast) -->
					<th:block th:if="${session.successMsg}">
						<div class="toast-container position-fixed top-0 end-0 p-3">
							<div id="cartToast"
								class="toast show align-items-center text-white bg-success border-0 shadow-lg"
								role="alert" aria-live="assertive" aria-atomic="true">
								<div class="toast-header">
									<img src="/img/suu.jpeg" class="rounded me-2"
										alt="Success" width="20"> <strong class="me-auto">Success</strong>
									<small class="text-muted">just now</small>
									<button type="button"
										class="btn-close btn-close-white me-2 m-auto"
										data-bs-dismiss="toast" aria-label="Close"></button>
								</div>
								<div class="toast-body">
									<i class="fas fa-check-circle"></i> [[${session.successMsg}]]
								</div>
							</div>
						</div>
						<th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
					</th:block>

					<!-- Product Image -->
					<!-- th:src="@{'/img/product_img/'+${product.image}}" -->
					<div class="col-lg-6 text-center">
						<img th:src="${product.image}"
							class="img-fluid rounded" alt="Laptop">
					</div>

					<!-- Product Details -->
					<div class="col-lg-6">
						<h2 class="fw-bold">[[${product.title}]]</h2>
						<p>
							<span class="text-highlight">Description:</span>
							[[${product.description}]]
						</p>
						<p>
							<span class="text-highlight">Product Details:</span><br>
							Status:
							<th:block th:if="${product.stock>0}">
								<span class="badge bg-success badge-custom">Available</span>
							</th:block>
							<th:block th:unless="${product.stock>0}">
								<span class="badge bg-warning badge-custom">Out of Stock</span>
							</th:block>
							<br> Category: [[${product.category}]]<br> Policy: 7
							Days Replacement & Return
						</p>

						<!-- Price Section -->
						<p class="fs-4 fw-bold text-dark">
							Price: <i class="fas fa-rupee-sign"></i>
							[[${product.discountPrice}]] <span
								class="fs-5 text-decoration-line-through text-secondary">[[${product.price}]]</span>
							<span class="fs-5 text-success">[[${product.discount}]]%
								off</span>
						</p>

						<!-- Product Features -->
						<div class="row text-center">
							<div class="col-4 p-3">
								<i class="fas fa-money-bill-wave fa-2x text-primary"></i>
								<p>Cash On Delivery</p>
							</div>
							<div class="col-4 p-3">
								<i class="fas fa-undo fa-2x text-primary"></i>
								<p>Return Available</p>
							</div>
							<div class="col-4 p-3">
								<i class="fas fa-shipping-fast fa-2x text-primary"></i>
								<p>Free Shipping</p>
							</div>
						</div>

						<!-- Add to Cart Button -->
						<div class="mt-3">
							<th:block th:if="${product.stock>0}">
								<th:block th:if="${user==null}">
									<a href="/signin" class="btn btn-primary btn-lg w-100">Add
										to Cart</a>
								</th:block>
								<th:block th:unless="${user==null}">
								<th:block th:if="${user.role=='ROLE_USER'}">
								
									<a
										th:href="@{'/user/addCart?pid='+${product.id}+'&uid='+${user.id}}"
										class="btn btn-primary btn-lg w-100 add-to-cart">Add to
										Cart</a>
										</th:block>
										
										<th:block th:unless="${user.role=='ROLE_USER'}">
								
									
										
										</th:block>
								</th:block>
							</th:block>
							<th:block th:unless="${product.stock>0}">
								<a href="#" class="btn text-white btn-warning btn-lg w-100">Out
									of stock</a>
							</th:block>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script>
        document.addEventListener("DOMContentLoaded", function () {
            let toastElement = document.getElementById('cartToast');
            if (toastElement) {
                let toast = new bootstrap.Toast(toastElement);
                toast.show();
                setTimeout(() => { toast.hide(); }, 3000);
            }
        });
    </script>
	</section>



</body>
</html>
